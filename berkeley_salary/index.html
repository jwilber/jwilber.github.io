<!DOCTYPE html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="./css/style4.css" type="text/css" media="screen"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84472984-1"></script>
<style>
    .x-axis .tick{
        font-size: 12px;
    }

    .y-axis .tick{
        font-size: 9.5px;
    }

    .x-axis path, .y-axis path{
            shape-rendering: crispEdges;
            fill: none;
            stroke: black;
        }
    .y-axis path {
        stroke: white;
    }

    .x-axis path,
  .x-axis line{
    fill: none;
    stroke: black;
  }

  .line{
    fill: none;
    stroke: blue;
    stroke-width: 2px;
  }

  .tick line{
    opacity: 1;
    stroke-dasharray: 5,5;
  }

  #tooltip2 {
 position: absolute;
 width: 90px;
 height: auto;
 padding: 4px;
 background-color: white;
 -webkit-border-radius: 10px;
 -moz-border-radius: 10px;
/* border-radius: 10px;
 -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
 -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
 box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);*/
 pointer-events: none;
}
#tooltip2.hidden {
 display: none;
}
#tooltip2 p {
 margin: 0;
 font-size: 12px;
 line-height: 13px;
}

</style>
</head>
<body>
<h1>U.C. Berkeley Salaries</h1>
<h2> INSTRUCTOR SALARIES BY DEPARTMENT </h2>
<p class="text-uppercase">by <a href="http://jwilber.github.io" target="_self">Jared Wilber</a> &middot; December 2017<br></p>

<br>
<p> Among all higher-education institutions in the world, U.C. Berkeley employs the highest number of Nobel Prize winners. You can seem them strolling about campus, there are parking spots reserved for them; even the director of the research lab I worked in throughout my undergrad earned the award in Physics. That said, the faculty talent doesn't end at Nobel Prize winners - with a <a href="https://www.timeshighereducation.com/world-university-rankings/2017/world-ranking#!/page/0/length/25/sort_by/rank/sort_order/asc/cols/stats">top 10 worldwide ranking</a>, Berkeley's faculty is amazing across the board.<br></p>
<p><br></p>
<p> While the subject may be taboo, I was always curious as to how much money the Professors made from their positions. After all, any number of them could have gone into industry and made a killing, so surely they must be well-compensated by the university. Luckily for us, this information is public domain. (Even luckier for us, Sahil Chinoy of the Daily Cal <a href="http://projects.dailycal.org/paychecker/">created an open-source database</a> for the data).</p>
<p><br></p>
<p> Below, I've visualized the data using a <a href="https://en.wikipedia.org/wiki/Treemapping">tree map</a>. Each rectangle is sized by its salary, relative to others in the same selection. Colors denote teaching level (e.g. <i> Professor</i>, <i> Lecturer</i>, etc.), and the distribution of teaching level can be viewed via the <i>Display Teaching Level</i> checkbox. The scroller allows for additional color subsetting by salary. Use the filter to select a major you'd like to investigate.</p>
<!-- <p> Note - to keep some semblance of privacy, I've selected salaries dating 2 years back. If you're a Professor and you want to be removed, shoot me an email.</p> -->
<p><br></p>

<div id="filters">

    <div id="leftfilters">

        <div id="stateselect">
            <label for="statesmenu">Filter by Department</label>
            <select name="statesmenu" value="AAS">
                <option value="nat" selected>All Departments</option>
                <option disabled>─────────</option>
                <option value="AAS">African American Studies</option>
                <option value="AREP">Agricultural & Resource Economics</option>
                <option value="ANTH">Anthroplogy</option>
                <option value="ARCH">Architecture</option>
                <option value="AH">Art History</option>
                <option value="ARTP">Art Practice</option>
                <option value="ASTRO">Astronomy</option>
                <option value="BIOE">Bioengineering</option>
                <option value="BIO">Biology</option>
                <option value="BUS">Business</option>
                <option value="CHEME">Chemical Engineering</option>
                <option value="CHEM">Chemistry</option>
                <option value="CRP">City & Regional Planning</option>
                <option value="CEE">Civil & Environmental Engineering</option>
                <option value="CLA">Classics</option>
                <option value="CW">College Writing</option>
                <option value="CL">Comparative Literature</option>
                <option value="CS">Computer Science</option>
                <option value="DEMO">Demography</option>
                <option value="EPS">Earth and Planetary Science</option>
                <option value="ECON">Economics</option>
                <option value="EDU">Education</option>
                <option value="EE">Electrical Engineering</option>
                <option value="EECS">E.E.C.S.</option>
                <option value="ERE">Energy & Resources Engineering</option>
                <option value="ENG">English</option>
                <option value="ENVD">Environmental Design</option>
                <option value="ESPM">E.S.P.M.</option>
                <option value="ES">Ethnic Studies</option>
                <option value="FREN">French</option>
                <option value="GWS">Gender & Women's Studies</option>
                <option value="GEOG">Geography</option>
                <option value="GERM">German</option>
                <option value="HIST">History</option>
                <option value="IEOR">Ind. Engineering & Ops Research</option>
                <option value="INFO">Information</option>
                <option value="IDS">Interdisciplinary Studies</option>
                <option value="IAS">International & Area Studies</option>
                <option value="JOUR">Journalism</option>
                <option value="LAEP">Landscape Architecture</option>
                <option value="LAW">Law</option>
                <option value="LING">Linguistics</option>
                <option value="MSE">Material Science & Engineering</option>
                <option value="MATH">Mathematics</option>
                <option value="ME">Mechanical Engineering</option>
                <option value="MSE">Middle Eastern Studies</option>
                <option value="MUS">Music</option>
                <option value="NER">Near Eastern Studies</option>
                <option value="NENG">Nuclear Engineering</option>
                <option value="NS">Nutritional science</option>
                <option value="OPT">Optometry</option>
                <option value="PHIL">Philosophy</option>
                <option value="PHY">Physics</option>
                <option value="PS">Political Science</option>
                <option value="PSYC">Psychology</option>
                <option value="PH">Public Health</option>
                <option value="PP">Public Policy</option>
                <option value="RHET">Rhetoric</option>
                <option value="SCAN">Scandinavian Languages</option>
                <option value="SLL">Slavic Languages and Literature</option>
                <option value="SW">Social Welfare</option>
                <option value="SOC">Sociology</option>
                <option value="SSAS">South & Southeast Asian Studies</option>
                <option value="SP">Spanish and Portuguese</option>
                <option value="STAT">Statistics</option>

            </select>
        </div><!-- @end #stateselect -->

        <div id="showjobcats">
            <form>
              <input type="checkbox" name="parentcheck" value="on" id="parentcheck" />
              <label for="parentcheck">Display Teaching Level &ensp;&ensp;</label>
            </form>
        </div><!-- @end #showjobcats -->
    </div><!-- @end #leftfilters -->
    <p><br></p>
    <div id="rightfilters">
        <div id="sliderholder">
            <label></label>
        </div>
    </div><!-- @end #rightfilters -->

    <div class="clr"></div>
</div><!-- @end #filters -->

<div id="jobs">
    <div id="treemapholder"></div>
    <div id="tooltip" class="hidden">
        <div id="jobgroup"></div>
        <div id="jobtitle"></div>
        <div id="jobsalary"></div>
        <div id="jobemptot"></div>
    </div>
    <div id="loadprogress">Loading Data&hellip;<br /><span class="progvalue">0</span>%</div>
</div><!-- @end #jobs -->


<div id="credits">
    Author: Jared Wilber
</div><!-- @end #credits -->

<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="salary_tree.js"></script>

<p><br></p>
<p> As expected, there is a direct relationship between teaching-level and salary: the higher one is in the hierarchy of instruction, the better off they are compensated. There is also some salary variance related to department; it appears departments that fit into the STEM umbrella see higher ceilings for salary than those that do not. This observation remains true across teaching-levels. </p>
<br>
<h2>SALARIES BY DEPARTMENT</h2>
<p><br></p>
<p> Students are often berated for the financial prospects of their major; is it the case that professors of these berated majors make less than their counterparts in other departments? In an effort to investigate any department-level difference in salary, we can compare faculty salaries at a more macro level, observing how aggregate salaries differ between departments.  <br></p>
<br>
<p> To avoid skew from very high-paying professors (such as the Nobel Prize winners mentioned previously), we'll look at the median salaries of faculty by department.</p>
<p><br></p>
<div id="barchart"></div>
<p><br></p>

<p> As we saw in the treemap previously, department appears to be a driving factor for salary.
In general, more STEM-focused departments see higher salaries. This may be for reasons of funding (Berkeley is a research institute and STEM departments often receive higher grants), demand, or location (Berkeley's proximity to Silicon Valley means high -compensation alternatives are nearby).</p>

<!-- 
<p> If you frequent any Berkeley-associated social media, you'll no doubt have heard the phrase "<i>EECS master race</i>", which refers to students studying Electrical Engineering and Computer Science - in particular their likelihood of landing high-paying jobs. Based on the data, it would appear, then, that this is the case for the faculty as well. Of relevant mention is the median salary for Business instructors, That said, I don't think the story here is with  </p> -->
<p><br></p>
<h2> Data And Methodology </h2>
<p><br></p>
<p> As mentioned previously, the data is publically accessible, and the Daily Cal's Sahil Chinoy  <a href="http://projects.dailycal.org/paychecker/">created an open-source database</a> using the data. Preparing the data for analysis required some light data munging, which was accomplished using R. The visualizations were created using Javascript's D3 library.<p>
    <p><br></p>
    <p><br></p>
<div id="tooltip2" class="hidden">
 <p><strong>Median Salary</strong></p>
 <p>$<span id="value">100</span></p>
</div>

<script>
    d3.csv("data/med_salary.csv", function(data) {
        console.log(data);

        data.sort(function(a, b) {
        return b.med_salary - a.med_salary;
      });

    var margin = {top: 50, bottom: 60, left: 112, right: 112};
    w = 1080
    h = 1200

    svg = d3.select('#barchart')
            .append('svg')
            .attr('width', w )
            .attr('height', h )
            .append('g')
            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    var xScale = d3.scale.linear()
                        .domain([0, d3.max(data, function(d) { return parseInt(d.med_salary);})])
                        .range([margin.left, w - margin.right - margin.left ]);

    var yScale = d3.scale.ordinal()
                .domain(data.map( function(d) {return d.department;}))// .domain(d3.range(data.length))
                .rangeBands([0, h - margin.top - margin.bottom - 20], .05);

    var xAxis = d3.svg.axis()
                .scale(xScale)
                .orient('bottom')
                .ticks(10);

    var yAxis = d3.svg.axis()
                .scale(yScale)
                .orient('left');

    svg.selectAll('rect')
        .data(data)
        .enter()
        .append('rect')
        .attr('id', 'rect')
        .attr('width', function(d) { return xScale(parseInt(d.med_salary)) - 100;})
        .attr('height', yScale.rangeBand())
        .attr('fill', '#fdbf6f')
        .attr('x', margin.left)
        .attr('y', function(d) {return yScale(d.department);});

    svg.append('g')
        .classed('x-axis', true)
        .attr('transform', 'translate(0,' + (h - margin.bottom - margin.top - 20) + ')')
        .call(xAxis);

    svg.append('g')
        .classed('y-axis', true)
        .attr('transform', 'translate(' + margin.left + ',0)')
        .call(yAxis);

    d3.select('svg').append('text')
            .classed('title', true)
            .attr('x', w/2)
            .attr('y', margin.top - 20)
            .attr('text-anchor', 'middle')
            .text('Faculty Median Salary By Department')
            .attr('font-size', 20);

    // d3.selectAll('#rect')
    //     .on('mouseover', function() {

    //         d3.select(this)
    //             .attr('fill', '#42c2f6')
    //     });

    // d3.selectAll('#rect')
    //     .on('mouseout', function() {

    //         d3.select(this)
    //             .attr('fill', '#fdbf6f')
    //     });

    d3.selectAll('#rect')
        .on("mouseover", function(d) {
            //Get this bar's x/y values, then augment for the tooltip
            var xPosition = parseFloat(d3.select(this).attr("x")) + 300;
            var yPosition = parseFloat(d3.select(this).attr("y")) + 1362;
            //Update the tooltip position and value
            d3.select("#tooltip2")
             .style("left", xPosition + "px")
             .style("top", yPosition + "px")
             .select("#value")
             .text(numberWithCommas(d.med_salary))
            //Show the tooltip
            d3.select("#tooltip2").classed("hidden", false);
            d3.select(this)
                .attr('fill', '#e7db97');
        })

    d3.selectAll('#rect')
        .on('mouseout', function() {

            d3.select("#tooltip2").classed("hidden", true);

            d3.select(this)
                .attr('fill', '#fdbf6f');
            //Hide the tooltip
            
        });


});

    function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

</script>



</body>
